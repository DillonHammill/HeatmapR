---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# heatmapr <img src="man/figures/logo.png" align="right" alt="" width="240"/>

<!-- badges: start -->
[![Project Status: Active â€“ The project has reached a stable, usable state and is being actively developed.](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)
[![Travis build status](https://travis-ci.com/DillonHammill/heatmapr.svg?branch=master)](https://travis-ci.com/DillonHammill/heatmapr)
[![Codecov test coverage](https://codecov.io/gh/DillonHammill/heatmapr/branch/master/graph/badge.svg)](https://codecov.io/gh/DillonHammill/heatmapr?branch=master)
[![lifecycle](https://img.shields.io/badge/lifecycle-maturing-blue.svg)](https://www.tidyverse.org/lifecycle/#maturing)
[![Last-changedate](https://img.shields.io/badge/last%20change-`r gsub('-', '--', Sys.Date())`-yellowgreen.svg)](/commits/master)
<!-- badges: end -->

**heatmapr** makes it easy to generate high quality heatmaps with minimal data preprocessing or manual customization. 

## Installation

**heatmapr** can be installed directly from GitHub:

```{r, eval = FALSE, echo = TRUE}
devtools::install_github("DillonHammill/heatmapr")
```

## Usage

Creating heatmaps is as easy as loading **heatmapr** and supplying your dataset to the `heat_map()` function. This will generate a heatmap with the default red to green colour scale. 

```{r, eval =TRUE, echo = FALSE}
library(heatmapr)
```

```{r, eval = FALSE}
library(heatmapr)
heat_map(mtcars)
```

```{r, eval = FALSE, echo = FALSE}
heat_map_save("man/figures/README-heatmapr-1.png",
              height = 7,
              width = 10,
              res = 500)
heat_map(mtcars)
```

```{r echo = FALSE, out.width = '95%', fig.align="center"}
knitr::include_graphics('man/figures/README-heatmapr-1.png')
```

Obviously this heatmap is not very informative as the variables in the `mtcars` dataset are on vastly different scales. Fortunately, `heat_map()` can take of care of the scaling for us to put all of the variables on a similar scale. `heat_map()` will perform column-wise scaling using either the `range`, `mean` or `zscore` scaling methods. Let's apply `range` scaling to the `mtcars` dataset and change the colour scale to white-yellow-red:

```{r, eval = FALSE}
heat_map(mtcars,
         scale = "range",
         box_col_scale = c("white",
                           "yellow",
                           "orange",
                           "red",
                           "darkred"))
```

```{r, eval = FALSE, echo = FALSE}
heat_map_save("man/figures/README-heatmapr-2.png",
              height = 7,
              width = 10,
              res = 500)
heat_map(mtcars,
         scale = "range",
         box_col_scale = c("white",
                           "yellow",
                           "orange",
                           "red",
                           "darkred"))
```

```{r echo = FALSE, out.width = '95%', fig.align="center"}
knitr::include_graphics('man/figures/README-heatmapr-2.png')
```

Clearly, scaling has a big impact on how the data is visualized and so it is a good idea to play around with the different scaling methods to get the best visualization of the data. `heat_map()` can also perform hierachical clustering by `row`, `column` or `both`, and the data can then be reordered to group the data based on relatedness. This reordering can be manually turned off by setting `reorder = FALSE`. Let's perform hierarchical clustering on both the rows and columns and allow `heat_map()` to reorder the data:

```{r, eval = FALSE}
heat_map(mtcars,
         scale = "range",
         cluster = "both",
         box_col_scale = c("white",
                           "yellow",
                           "orange",
                           "red",
                           "darkred"))
```

```{r, eval = FALSE, echo = FALSE}
heat_map_save("man/figures/README-heatmapr-3.png",
              height = 7,
              width = 10,
              res = 500)
heat_map(mtcars,
         scale = "range",
         cluster = "both",
         box_col_scale = c("white",
                           "yellow",
                           "orange",
                           "red",
                           "darkred"))
```

```{r echo = FALSE, out.width = '95%', fig.align="center"}
knitr::include_graphics('man/figures/README-heatmapr-3.png')
```

Sometimes it is useful to include non-numeric variables in the heatmap as well. `heat_map()` takes care of this by moving non-numeric variables to the right of the heatmap and does not use these variables during scaling and clustering. Colours for these non-numeric variables are selected from `box_col_palette`. Here is an example using the `iris` dataset, in which the `species` column contains non-numeric data.

```{r, eval = FALSE}
heat_map(iris,
         scale = "range",
         cluster = "both",
         box_col_scale = c("red", 
                           "black",
                           "green"),
         box_col_palette = c("purple",
                             "orange",
                             "blue"))
```

```{r, eval = FALSE, echo = FALSE}
heat_map_save("man/figures/README-heatmapr-4.png",
              height = 7,
              width = 10,
              res = 500)
heat_map(iris,
         scale = "range",
         cluster = "both",
         box_col_scale = c("red", 
                           "black",
                           "green"),
         box_col_palette = c("purple",
                             "orange",
                             "blue"))
```

```{r echo = FALSE, out.width = '95%', fig.align="center"}
knitr::include_graphics('man/figures/README-heatmapr-4.png')
```



